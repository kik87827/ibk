<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link href="./assets/css/reset.css" rel="stylesheet">
	<link href="./assets/css/swiper.min.css" rel="stylesheet">
	<link href="./assets/css/layout.css" rel="stylesheet">
	<link href="./assets/css/contents.css" rel="stylesheet">
	<script src="./assets/js/jquery-3.4.1.min.js"></script>
	<script src="./assets/js/swiper.min.js"></script>
	<script src="./assets/js/ui.js"></script>
    <title></title>
</head>
<body class="front_body">
	<div class="page_wrap">
        <div class="survey_document_wrap">
            <div class="survey_swiper_zone">
                <div class="swiper-container survey">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <div class="survey_gate_wrap">
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="survey_docu_wrap">
                                <div class="survey_title_row">
                                    <p class="survey_title_main"><span class="survey_title_bullet">01</span><span class="survey_title_liquid">전반적 만족도</span></p>
                                    <p class="survey_title_sub">
                                        신청하신 바우처를 이용하신 후 <br>서비스에 만족하셨습니까?
                                    </p>
                                </div>
                                <div class="survey_form_row">
                                    
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="survey_docu_wrap">
                                <div class="survey_title_row">
                                    <p class="survey_title_main"><span class="survey_title_bullet">02</span><span class="survey_title_liquid">서비스 보완점</span></p>
                                    <p class="survey_title_sub">
                                        신청하신 바우처 이용 경험을 바탕으로 <br>
                                        보완해야 할 점이 있다면 선택해주세요. <br class="imp">
                                        (간단한 의견기재 서술 부탁드립니다.)
                                    </p>
                                </div>
                                <div class="survey_form_row">
                                    
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="survey_docu_wrap">
                                <div class="survey_title_row">
                                    <p class="survey_title_main"><span class="survey_title_bullet">03</span><span class="survey_title_liquid">예약 과정 만족도</span></p>
                                    <p class="survey_title_sub">
                                        선택하신 골프장 예약 과정은 편리하셨습니까?<br class="imp">(전담센터 이용) 
                                    </p>
                                </div>
                                <div class="survey_form_row">
                                    
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="survey_docu_wrap">
                                <div class="survey_title_row">
                                    <p class="survey_title_main"><span class="survey_title_bullet">04</span><span class="survey_title_liquid">기프트 만족도</span></p>
                                    <p class="survey_title_sub">
                                        선택하신 골프바우처 혜택에 만족하십니까?<br class="imp">
                                        (라운딩, 숙박권/ 푸드 크레딧 등)<br class="imp">
                                        * 선택하신 서비스에 따라 혜택이 상이합니다.
                                    </p>
                                </div>
                                <div class="survey_form_row">
                                    
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="survey_docu_wrap">
                                <div class="survey_title_row">
                                    <p class="survey_title_main"><span class="survey_title_bullet">05</span><span class="survey_title_liquid">컨시어지서비스 선호도</span></p>
                                    <p class="survey_title_sub">
                                        컨시어지 서비스
                                    </p>
                                </div>
                                <div class="survey_form_row">
                                    
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="survey_docu_wrap">
                                <div class="survey_title_row">
                                    <p class="survey_title_main"><span class="survey_title_bullet">06</span><span class="survey_title_liquid">향후 기프트 선호</span></p>
                                    <p class="survey_title_sub">
                                        새롭게 추가되었으면 하는 카테고리를 <br>선택해 주세요. (중복 선택 가능)
                                    </p>
                                </div>
                                <div class="survey_form_row">
                                    
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="survey_docu_wrap type2">
                                <div class="survey_docu_inner">
                                    <p class="survey_docu_message">소중한 의견<br>감사합니다.</p>
                                </div>
                                <div class="survey_docu_btn_row">
                                    <a href="javascript:void(0)" class="btn_control_box close_trigger">확인</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swiper_pagination_layer">
                    <div class="swiper_pagination_cols">
                        <div class="swiper-pagination">
        
                        </div>
                    </div>
                    <div class="swiper_fraction_cols">
                        <span class="swiper_fraction_para">
                            <span class="swiper_fraction_current">1</span>
                            <span class="swiper_fraction_part">/</span>
                            <span class="swiper_fraction_length">4</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded",()=>{
            surveyLayerFunc();
        });
        
        function surveyLayerFunc(){
            const htmlElement = document.documentElement;
            const bodyElement = document.body;
            const survey_document_wrap = document.querySelector(".survey_document_wrap");
            const survey_swiper_container = document.querySelector(".swiper-container.survey");
            const survey_swiper_slide = survey_swiper_container.querySelectorAll(".swiper-slide");
            const swiper_fraction_current = survey_document_wrap.querySelector(".swiper_fraction_current");
            const swiper_fraction_length = survey_document_wrap.querySelector(".swiper_fraction_length");
            const survey_swiper_slide_length = survey_swiper_slide.length;
            const swiper_pagination_layer = document.querySelector(".swiper_pagination_layer");
            const btn_survey_close = document.querySelector(".btn_survey_close");
            const close_trigger = document.querySelectorAll(".survey_swiper_zone .close_trigger");
            if(!!survey_swiper_container){
            
                swiper_fraction_length.textContent = survey_swiper_slide_length-2;
                htmlElement.classList.add("touchDis");
                let survey_swiper = new Swiper(".swiper-container.survey",{
                    on : {
                        init(){
                        console.log('init');
                        //controlFunc();
                        }
                    },
                    pagination: {
                        el: ".swiper_pagination_layer .swiper-pagination",
                    },
                    autoHeight : true
                });
                survey_swiper.on("slideChange",()=>{
                    console.log('slideChange');
                    controlFunc();
                });
                
                propsButton();
                if(!!close_trigger){
                    close_trigger.forEach((item)=>{
                        item.addEventListener("click",()=>{
                            survey_document_wrap.style.display = "none";
                            htmlElement.classList.remove("touchDis");
                        });
                    });
                }
    
                function controlFunc(){
                    /* console.log(survey_swiper.realIndex); */
                    if(survey_swiper.realIndex >= 1 && survey_swiper.realIndex < survey_swiper_slide_length - 1){
                        swiper_pagination_layer.classList.add("active");
                        swiper_fraction_current.textContent = survey_swiper.realIndex;
                    }else{
                        swiper_pagination_layer.classList.remove("active");
                    } 
    
                    /* if(survey_swiper.realIndex == survey_swiper_slide_length - 1){
                        setTimeout(()=>{
                            survey_document_wrap.style.display = "none";
                            htmlElement.classList.remove("touchDis");
                        },1500);
                    } */
                }
    
                function propsButton(){
                    const props_button = document.querySelectorAll(".props_button");
                    if(!!props_button){
                        props_button.forEach((item)=>{
                            item.addEventListener("click",(e)=>{
                                const thisEvent = e.currentTarget;
                                const thisEventParent = thisEvent.closest(".props_item_list");
                                const notEvent = thisEvent.closest(".survey_form_list").querySelectorAll(".props_button");
                                if(!!notEvent && !thisEventParent){
                                    notEvent.forEach((item)=>{
                                        if(thisEvent !== item){
                                            item.classList.remove("active");
                                        }
                                    });
                                }
                                thisEvent.classList.toggle("active");
                            });
                        });
                    }
                }
            }
        }
    </script>
</body>
</html>